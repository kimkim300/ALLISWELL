<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌱 ALL IS WELL</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <h1 id="headerTitle" class="editable-header" contenteditable="true" spellcheck="false" title="클릭하여 제목을 수정하세요">🥰 오늘도 럭키비키 🍀</h1>
                <div class="header-controls">
                    <div id="authButtons">
                        <button id="loginBtn" class="login-btn">🔐 로그인</button>
                        <button id="changePasswordBtn" class="change-password-btn" style="display: none;">🔐 비밀번호 변경</button>
                        <button id="logoutBtn" class="logout-btn" style="display: none;">🚪 로그아웃</button>
                    </div>

                </div>
                <!-- 사용자 이름 표시 영역 -->
                <div id="userNameDisplay" class="user-name-display" style="display: none;">
                    <span id="userNameText"></span>
                </div>
            </div>
            
        </header>
        
        <div class="calendar-section">
            <div class="calendar-header">
                <button id="prevMonth">◀</button>
                <div class="month-info">
                    <h2 id="currentMonth">2024년 1월</h2>
                    <div class="month-buttons">
                        <button id="monthStatsBtn" class="stats-btn">📊 월별 통계</button>
                        <button id="monthlyGoalBtn" class="goal-btn">🎯 이번달 목표</button>
                    </div>
                </div>
                <button id="nextMonth">▶</button>
            </div>
            <div class="calendar-grid" id="calendarGrid">
                <!-- 달력이 여기에 동적으로 생성됩니다 -->
            </div>
        </div>
        
        <!-- 메모 입력 섹션 -->
        <div class="memo-input">
            <div class="selected-date">
                <span id="selectedDateText">오늘</span>의 메모
            </div>
            <div class="input-controls">
                <button id="starButton" class="star-btn" title="중요 메모로 표시">
                    ☆
                </button>
                <div class="memo-input-fields">
                    <div class="category-row">
                        <select id="memoCategory" class="category-select">
                            <option value="">카테고리 선택</option>
                        </select>
                        <button id="manageCategoriesBtn" class="manage-categories-btn" title="카테고리 관리">
                            ⚙️
                        </button>
                    </div>
                    <select id="memoTime" class="time-select">
                        <option value="">소요 시간 선택</option>
                        <option value="0">0~30분</option>
                        <option value="0.5">30분~1시간</option>
                        <option value="1">1시간~1.5시간</option>
                        <option value="1.5">1.5시간~2시간</option>
                        <option value="2">2시간~2.5시간</option>
                        <option value="2.5">2.5시간~3시간</option>
                        <option value="3">3시간~3.5시간</option>
                        <option value="3.5">3.5시간~4시간</option>
                        <option value="4">4시간 이상</option>
                    </select>
                    <textarea id="memoText" placeholder="메모를 입력하세요..."></textarea>
                </div>
            </div>
            <button id="addMemo">✨ 추가 ✨</button>
        </div>
        
        <!-- 오늘의 루틴과 메모를 좌우로 배치 -->
        <div class="daily-tasks-container">
            <!-- 왼쪽: 오늘의 루틴 -->
            <div class="routine-section">
                <div class="section-header">
                    <div class="section-title">
                        <span class="section-icon">📅</span>
                        오늘의 루틴 (<span id="routineCount">0</span>개)
                    </div>
                    <button id="manageRoutinesBtn" class="manage-btn">⚙️ 루틴 관리</button>
                </div>
                <div id="routineList" class="routine-list" data-type="routine">
                    <!-- 루틴 목록이 여기에 표시됩니다 -->
                </div>
            </div>

            <!-- 오른쪽: 오늘의 메모 -->
            <div class="memo-section">
                <div class="section-header">
                    <div class="section-title">
                        <span class="section-icon">📝</span>
                        오늘의 메모 (<span id="memoCount">0</span>개)
                    </div>
                </div>
                <div id="memoList" class="memo-list" data-type="memo">
                    <!-- 메모 목록이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>
        
        <!-- Firebase 상태 표시 (하단) -->
        <div class="firebase-status" id="firebaseStatus">
            <span class="status-indicator" id="statusIndicator">🔄</span>
            <span class="status-text" id="statusText">연결 중...</span>
        </div>
    </div>
    
    <!-- 월별 통계 모달 -->
    <div id="monthStatsModal" class="modal-overlay">
        <div class="monthly-stats-modal">
            <div class="modal-header">
                <h3 id="modalMonthTitle">📊 월별 통계</h3>
                <button id="closeStatsModal" class="close-btn">&times;</button>
            </div>
            <div id="statsContent" class="stats-content">
                <div class="stats-summary">
                    <div class="stat-item">
                        <div class="stat-number" id="totalMemos">0</div>
                        <div class="stat-label">총 메모</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalRoutines">0</div>
                        <div class="stat-label">총 루틴</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="completionRate">0%</div>
                        <div class="stat-label">달성률</div>
                    </div>
                </div>
                <div class="stats-details">
                    <h4>📝 카테고리별 통계</h4>
                    <div id="categoryStats" class="category-stats"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 이번달 목표 모달 -->
    <div id="monthlyGoalModal" class="modal-overlay">
        <div class="monthly-goal-modal">
            <div class="modal-header">
                <h3>🎯 이번달 목표</h3>
                <button id="closeGoalModal" class="close-btn">&times;</button>
            </div>
            <div class="goal-content">
                <!-- 통합된 목표 영역 -->
                <div class="goal-unified-section">
                    <h4 id="goalSectionTitle">✏️ 이번달 목표</h4>
                    
                    <!-- 목표 입력/수정 영역 -->
                    <div class="form-group">
                        <label for="monthlyGoalText">목표를 작성해주세요:</label>
                        <textarea id="monthlyGoalText" placeholder="예: 매일 30분 독서하기, 주 3회 운동하기, 새로운 기술 배우기 등..." rows="6"></textarea>
                    </div>

                    <!-- 현재 목표 정보 표시 (작은 텍스트로) -->
                    <div class="goal-info" id="goalInfo" style="display: none;">
                        <small>📅 작성일: <span id="goalDateText"></span></small>
                    </div>

                    <!-- 액션 버튼들 -->
                    <div class="goal-actions">
                        <button id="saveMonthlyGoal" class="save-goal-btn">💾 목표 저장</button>
                        <button id="editMonthlyGoal" class="edit-goal-btn" style="display: none;">✏️ 목표 수정</button>
                        <button id="clearMonthlyGoal" class="clear-goal-btn">🗑️ 목표 삭제</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 카테고리 관리 모달 -->
    <div class="modal-overlay" id="categoryModal">
        <div class="category-modal">
            <div class="modal-header">
                <h3>⚙️ 카테고리 관리 🎨</h3>
                <button class="close-btn" id="closeCategoryModal">&times;</button>
            </div>
            <div class="category-content">
                <div class="add-category-section">
                    <h4>➕ 새 카테고리 추가</h4>
                    <div class="add-category-form">
                        <input type="text" id="newCategoryName" placeholder="카테고리 이름" maxlength="20">
                        <input type="text" id="newCategoryEmoji" placeholder="이모지 (선택사항)" maxlength="5">
                        <div class="color-picker-section">
                            <h5>🎨 색상 선택</h5>
                            <div class="color-options" id="colorOptions">
                                <!-- 색상 옵션들이 여기에 동적으로 추가됩니다 -->
                            </div>
                        </div>
                        <button id="addCategoryBtn">✨ 추가 ✨</button>
                    </div>
                </div>
                <div class="existing-categories-section">
                    <h4>📋 기존 카테고리</h4>
                    <div class="categories-list" id="categoriesList">
                        <!-- 카테고리들이 여기에 동적으로 추가됩니다 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 비밀번호 변경 모달 -->
    <div class="modal-overlay" id="changePasswordModal">
        <div class="change-password-modal">
            <div class="modal-header">
                <h3>🔐 비밀번호 변경</h3>
                <button class="close-btn" id="closeChangePasswordModal">&times;</button>
            </div>
            <div class="change-password-content">
                <p class="modal-description">
                    현재 비밀번호를 입력하고 새로운 비밀번호를 설정해주세요.
                </p>
                <form id="changePasswordForm">
                    <div class="form-group">
                        <label for="currentPassword">🔒 현재 비밀번호</label>
                        <input type="password" id="currentPassword" placeholder="현재 비밀번호를 입력하세요" required>
                    </div>
                    <div class="form-group">
                        <label for="newPassword">🆕 새 비밀번호</label>
                        <input type="password" id="newPassword" placeholder="새 비밀번호를 입력하세요 (6자 이상)" required>
                        <small class="password-hint">6자 이상의 안전한 비밀번호를 입력해주세요.</small>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">✅ 새 비밀번호 확인</label>
                        <input type="password" id="confirmPassword" placeholder="새 비밀번호를 다시 입력하세요" required>
                    </div>
                    <button type="submit" id="changePasswordSubmitBtn" class="change-password-submit-btn">
                        🔐 비밀번호 변경
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- 루틴 관리 모달 -->
    <div class="modal-overlay" id="routineModal">
        <div class="routine-modal">
            <div class="modal-header">
                <h3>🔄 루틴 관리</h3>
                <button class="close-btn" id="closeRoutineModal">&times;</button>
            </div>
            <div class="routine-content">
                <div class="add-routine-section">
                    <h4>➕ 새 루틴 추가</h4>
                    <div class="add-routine-form">
                        <div class="form-group">
                            <label for="routineTitle">📝 루틴 제목</label>
                            <input type="text" id="routineTitle" placeholder="예: 독서, 운동, 명상" maxlength="50" required>
                        </div>
                        <div class="form-group">
                            <label for="routineCategory">🏷️ 카테고리</label>
                            <select id="routineCategory" required>
                                <option value="">카테고리 선택</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="routineStartDate">📅 시작일</label>
                            <input type="date" id="routineStartDate" required>
                        </div>
                        <div class="form-group">
                            <label for="routineEndDate">📅 종료일</label>
                            <input type="date" id="routineEndDate" required>
                        </div>
                        <div class="form-group">
                            <label for="routineFrequency">🔄 반복 주기</label>
                            <select id="routineFrequency" required>
                                <option value="daily">매일</option>
                                <option value="weekly">매주</option>
                                <option value="monthly">매월</option>
                            </select>
                        </div>
                        <div class="form-group" id="monthlyOptions" style="display: none;">
                            <label for="routineMonthlyWeek">📅 매월 반복 옵션</label>
                            <div class="monthly-options">
                                <select id="routineMonthlyWeek" class="monthly-week-select">
                                    <option value="1">첫째 주</option>
                                    <option value="2">둘째 주</option>
                                    <option value="3">셋째 주</option>
                                    <option value="4">넷째 주</option>
                                    <option value="5">마지막 주</option>
                                </select>
                                <select id="routineMonthlyWeekday" class="monthly-weekday-select">
                                    <option value="0">월요일</option>
                                    <option value="1">화요일</option>
                                    <option value="2">수요일</option>
                                    <option value="3">목요일</option>
                                    <option value="4">금요일</option>
                                    <option value="5">토요일</option>
                                    <option value="6">일요일</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" id="weeklyOptions" style="display: none;">
                            <label for="routineWeekdays">📅 반복 요일 (주간 반복 시)</label>
                            <div class="weekday-selector" id="weekdaySelector">
                                <label class="weekday-checkbox">
                                    <input type="checkbox" value="1" data-weekday="월"> 월
                                </label>
                                <label class="weekday-checkbox">
                                    <input type="checkbox" value="2" data-weekday="화"> 화
                                </label>
                                <label class="weekday-checkbox">
                                    <input type="checkbox" value="3" data-weekday="수"> 수
                                </label>
                                <label class="weekday-checkbox">
                                    <input type="checkbox" value="4" data-weekday="목"> 목
                                </label>
                                <label class="weekday-checkbox">
                                    <input type="checkbox" value="5" data-weekday="금"> 금
                                </label>
                                <label class="weekday-checkbox">
                                    <input type="checkbox" value="6" data-weekday="토"> 토
                                </label>
                                <label class="weekday-checkbox">
                                    <input type="checkbox" value="0" data-weekday="일"> 일
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="routineTime">⏰ 소요 시간</label>
                            <select id="routineTime" class="time-select" required>
                                <option value="">소요 시간 선택</option>
                                <option value="0">0~30분</option>
                                <option value="0.5">30분~1시간</option>
                                <option value="1">1시간~1.5시간</option>
                                <option value="1.5">1.5시간~2시간</option>
                                <option value="2">2시간~2.5시간</option>
                                <option value="2.5">2.5시간~3시간</option>
                                <option value="3">3시간~3.5시간</option>
                                <option value="3.5">3.5시간~4시간</option>
                                <option value="4">4시간 이상</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="routineGoal">🎯 목표 (선택사항)</label>
                            <input type="text" id="routineGoal" placeholder="예: 30분씩, 1장씩" maxlength="100">
                        </div>
                        <button id="addRoutineBtn" class="add-routine-btn">✨ 루틴 추가 ✨</button>
                    </div>
                </div>
                <div class="existing-routines-section">
                    <h4>📋 기존 루틴</h4>
                    <div class="routines-list" id="routinesList">
                        <!-- 루틴들이 여기에 동적으로 추가됩니다 -->
                    </div>
                </div>
            </div>
        </div>
    </div>


    
    <script type="module" src="script.js"></script>
</body>
</html>


